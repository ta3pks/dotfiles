# ╔══════════════════════════════════════════════════════════════════════╗
# ║  keyd — Mirror Voyager Layout for Regular Keyboards                ║
# ╚══════════════════════════════════════════════════════════════════════╝
#
# Home row mods (bilateral): A/Ctrl S/Alt D/Gui F/Shift | H/Shift U/Ctrl I/Alt O/Gui
# Combos: D+F=Esc, J+K=Colon
# Layer-taps: B=Symbols, N=Nav
# Caps=Esc/Ctrl, Space=Space/Shift, LAlt=Alt/Fn, LMeta=Enter/Meta
# Repeat key on RAlt, Gaming layer toggle via Fn+G
#
# Deploy: sudo ln -sf ~/dotfiles/keyd/default.conf /etc/keyd/default.conf
#         sudo keyd reload

# ── Device matching ─────────────────────────────────────────────────────

[ids]

*
# Exclude ZSA Voyager (find ID with: sudo keyd monitor)
# -3297:1791

# ── Global settings ─────────────────────────────────────────────────────

[global]

chord_timeout = 50
overload_tap_timeout = 0

# ── Base layer ──────────────────────────────────────────────────────────

[main]

# ── Home row mods (left hand) ──
# lettermod(layer, key, idle_timeout, hold_timeout)
# - If typing fast (key within idle_timeout of another), immediately output letter
# - If idle, hold > hold_timeout activates modifier; intervening tap also activates it
a = lettermod(control, a, 150, 200)
s = lettermod(alt, s, 150, 200)
d = lettermod(meta, d, 150, 200)
f = lettermod(shift, f, 150, 200)

# ── Home row mods (right hand) ──
# H = Shift (home row), U/I/O = Ctrl/Alt/Gui (top row)
h = lettermod(shift, h, 150, 200)
u = lettermod(control, u, 150, 200)
i = lettermod(alt, i, 150, 200)
o = lettermod(meta, o, 150, 200)

# ── Combos ──
d+f = escape
j+k = S-semicolon

# ── Caps Lock: tap Esc / hold Ctrl ──
capslock = overload(control, esc)

# ── Space: tap Space / hold Shift ──
space = overload(shift, space)

# ── Left Meta: tap Enter / hold Meta ──
leftmeta = overload(meta, enter)

# ── Left Alt: tap Alt / hold Function layer ──
leftalt = overload(fn, layer(alt))

# ── Right Meta: tap Enter / hold Meta ──
rightmeta = overload(meta, enter)

# ── Right Alt: noop (repeat() requires keyd >= 2.6.0) ──
rightalt = noop

# ── Enter: disabled (Enter is on Meta tap) ──
enter = noop

# ── Layer-taps (generous 300ms hold) ──
b = lettermod(symbols, b, 150, 300)
n = lettermod(nav, n, 150, 300)

# ── Symbols & Numpad layer (hold B) ──────────────────────────────────────
#
#  Left:  ! @ # $ %     Right: = 7 8 9 *
#         ^ & ( ) bspc         | 4 5 6 - +
#         ~ { } [              0 1 2 3 /
#  Number row → F1-F12                Thumb: .

[symbols]

# Number row -> F-keys
1 = f1
2 = f2
3 = f3
4 = f4
5 = f5
6 = f6
7 = f7
8 = f8
9 = f9
0 = f10
minus = f11
equal = f12

# Left: ! @ # $ %  ^& ( ) bspc  ~ { } [
q = S-1
w = S-2
e = S-3
r = S-4
t = S-5
a = S-6
s = S-7
d = S-9
f = S-0
g = backspace
z = S-grave
x = S-leftbrace
c = S-rightbrace
v = leftbrace

# Right: = 7 8 9 *  | 4 5 6 - +  0 1 2 3 /  thumb: .
y = equal
u = 7
i = 8
o = 9
p = S-8
h = S-backslash
j = 4
k = 5
l = 6
semicolon = minus
apostrophe = S-equal
n = 0
m = 1
comma = 2
dot = 3
slash = slash
rightalt = dot

# ── Navigation & Media layer (hold N) ────────────────────────────────────
#
#  Left:  brightness, volume, media
#  Right: Home PgDn PgUp End    (above arrows)
#         Left Down Up   Right  Del  (vim HJKL)
#         Bspc Ins

[nav]

# Right: vim-style navigation
h = left
j = down
k = up
l = right
y = home
u = pagedown
i = pageup
o = end
semicolon = delete

# Right bottom
m = backspace
comma = insert

# Left: media & brightness
z = brightnessdown
x = brightnessup
c = volumedown
v = volumeup
b = mute

# ── Function layer (hold LAlt) ───────────────────────────────────────────
# :A modifier means unbound keys pass through with Alt applied (Alt+Tab works)

[fn:A]

g = toggle(gaming)

# ── Gaming layer (toggle via Fn+G) ───────────────────────────────────────
# Strips HRMs from ASDF/H/UIO, plain Space/Alt/Meta
# CapsLock = exit gaming mode, Enter re-enabled

[gaming]

# Plain letter keys (no home row mods)
a = a
s = s
d = d
f = f
h = h
u = u
i = i
o = o

# Plain modifiers
capslock = toggle(gaming)
space = space
leftalt = layer(alt)
leftmeta = layer(meta)
enter = enter
b = b
n = n
